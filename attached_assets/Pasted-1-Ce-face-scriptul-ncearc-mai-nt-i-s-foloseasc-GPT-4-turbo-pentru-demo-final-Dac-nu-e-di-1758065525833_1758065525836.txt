1. Ce face scriptul

ÃncearcÄƒ mai Ã®ntÃ¢i sÄƒ foloseascÄƒ GPT-4 turbo (pentru demo final).

DacÄƒ nu e disponibil sau dacÄƒ vrei sÄƒ economiseÈ™ti â†’ cade automat pe GPT-3.5 turbo.

PoÈ›i controla alegerea printr-o variabilÄƒ de mediu OPENAI_MODEL.

ğŸ”¹ 2. Codul de fallback (ai_scorer.py sau un modul separat)
import os
import openai

# citeÈ™te modelul din variabilele de mediu
PREFERRED_MODEL = os.getenv("OPENAI_MODEL", "gpt-4-turbo")

# fallback listÄƒ (poÈ›i adÄƒuga È™i gpt-4o-mini dacÄƒ ai acces)
MODEL_FALLBACKS = ["gpt-4-turbo", "gpt-3.5-turbo"]

def get_ai_response(prompt: str):
    last_error = None
    for model in MODEL_FALLBACKS:
        try:
            print(f"Trying model: {model}")
            response = openai.ChatCompletion.create(
                model=model,
                messages=[
                    {"role": "system", "content": "You are an expert sales opportunity evaluator using MEDDPICC and BANT frameworks. Score and explain professionally."},
                    {"role": "user", "content": prompt}
                ],
                temperature=0.3,
                max_tokens=500
            )
            return response["choices"][0]["message"]["content"], model
        except Exception as e:
            print(f"âš ï¸ Model {model} failed: {e}")
            last_error = e
    raise RuntimeError(f"All models failed. Last error: {last_error}")

ğŸ”¹ 3. Cum Ã®l foloseÈ™ti Ã®n aplicaÈ›ie

Ãn ai_scorer.py unde ai scorarea:

result, used_model = get_ai_response(prompt)
print(f"âœ… Response generated with {used_model}")

ğŸ”¹ 4. SetÄƒrile Ã®n Replit (pentru control)

Mergi la Secrets (Environment Variables) Ã®n Replit.

AdaugÄƒ:

OPENAI_API_KEY = cheia ta

OPENAI_MODEL = gpt-3.5-turbo (pentru testare ieftinÄƒ) sau gpt-4-turbo (pentru demo)

Salvezi.

ğŸ‘‰ DacÄƒ uiÈ›i sÄƒ setezi OPENAI_MODEL, scriptul va Ã®ncerca Ã®ntÃ¢i gpt-4-turbo È™i apoi cade pe gpt-3.5-turbo automat.

ğŸ”¹ 5. Instructiuni pentru workflow-ul Ã®n Replit

Pentru testare (synthetic data, bulk runs):

IntrÄƒ Ã®n Secrets â†’ OPENAI_MODEL = gpt-3.5-turbo

RuleazÄƒ Test scoring sau Score all opportunities

Cost redus, vitezÄƒ mare

Pentru demo final (live cu evaluatorii):

SchimbÄƒ Ã®n Secrets â†’ OPENAI_MODEL = gpt-4-turbo

RuleazÄƒ doar pe 3â€“5 rows

PrezinÈ›i explicaÈ›ii mai detaliate È™i experte

âœ… Rezultat:

Nu mai â€œardeâ€ credite scumpe Ã®n timpul testelor.

Ai flexibilitate sÄƒ comuÈ›i Ã®ntre modele doar din setÄƒri, fÄƒrÄƒ sÄƒ modifici codul.

Ai fallback automat dacÄƒ un model cade sau e indisponibil.